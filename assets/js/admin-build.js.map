{"version":3,"file":"assets/js/admin-build.js","mappings":";ouBAoDA,SAASA,EAAgBC,EAAMC,GAC7B,IAAMC,EAAW,IAAIC,SAGrB,OAFAD,EAASE,OAAO,OAAQJ,GAEjBK,MAAM,uCAAwC,CACnDC,OAAQ,OACRC,KAAML,IAEPM,MAAK,SAACC,GAAG,OAAKA,EAAIC,MAAM,IACxBF,MAAK,SAACG,GACL,IAAKA,EAAKC,QAAS,MAAM,IAAIC,MAAMF,EAAKG,SAAW,cAEnDC,EAAEd,GAAQe,WAAW,SACrBD,EAAEd,GAAQe,WAAW,gBAErB,IAAMC,EAAQC,SAASC,cAAc,SACrCF,EAAMG,IAAMT,EAAKU,KACjBJ,EAAMK,UAAW,EACjBL,EAAMM,QAAU,WAChBN,EAAMO,aAAc,EACpBP,EAAMQ,MAAMC,SAAW,OAGvB,IAAMC,EAAUT,SAASC,cAAc,KACvCQ,EAAQC,YAAYX,GAEpBF,EAAEd,GAAQe,WAAW,aAAcW,EACrC,GACF,CA/EIE,QAAQC,IAAI,iBACZZ,SAASa,iBAAiB,oBAAoB,WAkClD,IACUC,EACAC,EACAC,EACAC,EAEAC,EACAC,GA0CV,WAEI,IAAKnB,SAASoB,eAAe,0BAA2B,CACpD,IAAMb,EAAQP,SAASC,cAAc,SACrCM,EAAMc,GAAK,yBACXd,EAAMe,YAAc,g7CA+BpBtB,SAASuB,KAAKb,YAAYH,EAC9B,CAWA,SAASiB,EAA0BC,EAAMC,GAErC,IADA,IAAIC,EAAKF,IAA2B,IAAlBA,EAAKG,SAAiBH,EAAOA,EAAKI,eAC7CF,GAAMA,IAAOD,GAAgC,IAAhBC,EAAGC,UAAgB,CACnD,IAAME,EAAKC,OAAOC,iBAAiBL,GAAIM,cACvC,GAAIH,GAAa,WAAPA,EAAiB,OAAOA,EAClCH,EAAKA,EAAGE,aACZ,CACA,IAAMK,EAASR,EAAeK,OAAOC,iBAAiBN,GAAcO,cAAgB,SACpF,OAAQC,GAAqB,WAAXA,EAAuBA,EAAS,KACtD,CAGA,SAASC,EAAmBC,EAASC,GACjCD,EAAQE,OAAO,gBACfF,EAAQE,OAAO,uBACf,IAAMC,EAAMH,EAAQE,OAAO,uBAE3B,GAAKC,IAAOA,EAAIC,cAAhB,CAOA,IAAMC,EAAOzC,SAASC,cAAc,QAIpC,GAHAwC,EAAKlC,MAAM0B,cAAgBI,EAGW,mBAA3BE,EAAIG,mBACXH,EAAIG,mBAAmBD,QAGvB,KACmBF,EAAII,YAAcJ,EAAII,cAAgBZ,OAAOa,eAAeC,WAAW,IAC/EC,iBAAiBL,EAC5B,CAAE,MAAOM,GAEL,IAAMC,EAAST,EAAII,YAAcJ,EAAII,cAAgBZ,OAAOa,eAAeC,WAAW,GAChFI,EAAOD,EAAOE,kBACpBT,EAAK/B,YAAYuC,GACjBD,EAAOG,WAAWV,EACtB,CAI0B,mBAAnBL,EAAQE,QACfF,EAAQE,OAAO,sBA1BnB,MAFIc,MAAM,0BA8Bd,CAzDoBpD,SAASqD,iBAAiB,eA2D9C,IAAMC,EAAoB,SAAUlB,GAChC,IAAMmB,EAAK1D,EAAEC,WAAWyD,GAGlBC,EAAQ3D,EAAE,+DAiBhB,OAhBAA,EAAEG,SAASX,MAAMH,OAAOsE,GAExBA,EAAMC,GAAG,UAAU,WACf,IAAM3E,EAAO4E,KAAKC,OAASD,KAAKC,MAAM,GACjC7E,IAKLsD,EAAQE,OAAO,gBACfF,EAAQE,OAAO,uBACfzD,EAAgBC,EAAMsD,EAAQwB,WAAWC,KAAK,IAAG,OACtC,SAAAC,GAAG,OAAIV,MAAMU,EAAIlE,SAAW,aAAa,IAAC,SACxC,WAAQ4D,EAAMO,IAAI,GAAK,IACxC,IAEOR,EAAGS,OAAO,CACbC,SAAU,sCACVC,QAAS,UACTC,MAAO,WACH/B,EAAQE,OAAO,oBACfkB,EAAMY,QAAQ,QAClB,IACDC,QACP,EAGMC,EAAwB,SAAUlC,GACpC,IAAMmB,EAAK1D,EAAEC,WAAWyD,GAGlBgB,EAFS,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAExCC,KAAI,SAAAC,GAAC,6EAAAC,OAC8BD,EAAC,uEAAAC,OACJD,EAAC,6DAAAC,OACzBD,EAAC,0CAE/BE,KAAK,IAAM,+RAoDd,OA5CepB,EAAGqB,YAAY,CAC1BrB,EAAGS,OAAO,CACNa,UAAW,mCACXZ,SAAU,yEACVC,QAAS,sBACTzE,KAAM,CAAEqF,OAAQ,cAEpBvB,EAAGwB,SAAS,CACRF,UAAW,0BACXZ,SAAUM,EACVS,SAAU,SAAUC,GAGhB,SAASC,EAAWC,GAChB,IAAMC,EAASH,EAAUI,KAAK,aAC9BD,EAAOE,YAAY,UACnB,IAAMC,EAASH,EAAOI,QAAO,SAACC,EAAGC,GAAC,OAAK7F,EAAE6F,GAAGjG,KAAK,WAAa0F,CAAS,IACnEI,EAAOI,QAAQJ,EAAOK,SAAS,SACvC,CAPgBX,EAAUY,KAAK,oBASvBpC,GAAG,SAAS,WAAY,IAAAqC,EAAAC,EAC5B3D,EAAQE,OAAO,gBACfF,EAAQE,OAAO,uBACf,IAAMC,EAAMH,EAAQE,OAAO,uBAI3B4C,EADkB1D,EAFAe,GAAOA,EAAIyD,GAAMzD,EAAIyD,IAA6B,QAAvBF,EAAA9F,SAAS4C,sBAAc,IAAAkD,OAAA,EAAvBA,EAAyBG,aAAc,MAC/D7D,SAAmB,QAAZ2D,EAAP3D,EAASwB,kBAAU,IAAAmC,GAAU,QAAVA,EAAnBA,EAAqBG,gBAAQ,IAAAH,OAAA,EAA7BA,EAAgC,KAAM,MAG/D,IAEAd,EAAUI,KAAK,aAAa5B,GAAG,SAAS,SAAUV,GAC9CA,EAAEoD,iBACF,IAAMC,EAAQvG,EAAE6D,MAAMjE,KAAK,SAE3B0C,EAAmBC,EAASgE,GAG5BvG,EAAE6D,MAAM2C,QAAQ,4BAA4BhB,KAAK,YAAYC,YAAY,UACzEzF,EAAE6D,MAAMkC,SAAS,SACrB,GACJ,MAIMvB,QAClB,EAEArE,SAASqD,iBAAiB,eAAeiD,SAAQ,SAACC,GAC9C1G,EAAE0G,GAASzG,WAAW,CAClB0G,KAAM,QACNC,OAAQ,IAERC,QAAS,CACL,CAAC,QAAS,CAAC,UACX,CAAC,OAAQ,CAAC,OAAQ,SAAU,YAAa,QAAS,aAClD,CAAC,WAAY,CAAC,aACd,CAAC,QAAS,CAAC,UACX,CAAC,OAAQ,CAAC,KAAM,KAAM,cACtB,CAAC,QAAS,CAAC,UACX,CAAC,SAAU,CAAC,OAAQ,UAAW,QAAS,gBACxC,CAAC,SAAU,CAAC,SAAU,kBACtB,CAAC,OAAQ,CAAC,aAAc,WAAY,UAGxCC,UAAW,CAAC,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAC9FC,YAAa,CAAC,IAAK,MAAO,MAAO,MAAO,OAAQ,IAAK,MAAO,KAE5DC,QAAS,CACL5E,cAAeqC,EACfwC,YAAaxD,GAGjByD,UAAW,CACPC,OAAQ,WACJnH,EAAE0G,GAASzG,WAAW,SACtBD,EAAE0G,GAASzG,WAAW,YAC1B,EACAmH,QAAS,WACLpH,EAAE0G,GAASzG,WAAW,YAC1B,EACAoH,UAAW,WACPrH,EAAE0G,GAASzG,WAAW,YAC1B,EACAqH,cAAe,SAAUxD,GACrB,IAAM3E,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQyE,EAAM,IAE9BxE,MAAM,uCAAwC,CAC1CC,OAAQ,OACRC,KAAML,IAELM,MAAK,SAAC8H,GAAQ,OAAKA,EAAS5H,MAAM,IAClCF,MAAK,SAACG,GACCA,EAAKC,QACLG,EAAE0G,GAASzG,WAAW,cAAeL,EAAKU,MAE1CiD,MAAM3D,EAAKG,SAAW,mBAE9B,IAAE,OACK,SAACyH,GAAK,OAAK1G,QAAQ0G,MAAMA,EAAM,GAC9C,EAEAC,OAAQ,SAASvE,GACb,IAAMwE,EAAKxE,EAAEyE,cAAcC,aAC3B,GAAKF,GAAOA,EAAG5D,OAAU4D,EAAG5D,MAAMgC,OAAlC,CACA,IAAM+B,EAASC,EAAIJ,EAAG5D,OAAO6B,QAAO,SAAAoC,GAAC,OAAIA,EAAEC,KAAKC,WAAW,SAAS,IAChEJ,EAAO/B,SACP5C,EAAEoD,iBAAkBpD,EAAEgF,kBACtBlI,EAAE0G,GAASzG,WAAW,aACtBjB,EAAgB6I,EAAO,GAAInB,GAAQ,OAAO,SAAAzC,GAAG,OAAIV,MAAMU,EAAIlE,QAAQ,IALvB,CAOpD,EACAoI,QAAS,SAASjF,GACd,IAAMkF,EAAKlF,EAAEyE,cAAcU,cAC3B,GAAKD,GAAOA,EAAGtE,OAAUsE,EAAGtE,MAAMgC,OAAlC,CACA,IAAM+B,EAASC,EAAIM,EAAGtE,OAAO6B,QAAO,SAAAoC,GAAC,OAAIA,EAAEC,KAAKC,WAAW,SAAS,IAChEJ,EAAO/B,SACP5C,EAAEoD,iBAAkBpD,EAAEgF,kBACtBlI,EAAE0G,GAASzG,WAAW,aACtBjB,EAAgB6I,EAAO,GAAInB,GAAQ,OAAO,SAAAzC,GAAG,OAAIV,MAAMU,EAAIlE,QAAQ,IALvB,CAOpD,EAGAuI,cAAe,SAASxE,GACfA,GAAUA,EAAMgC,SACrB9F,EAAE0G,GAASzG,WAAW,aACtBjB,EAAgB8E,EAAM,GAAI4C,GAAQ,OAAO,SAAAzC,GAAG,OAAIV,MAAMU,EAAIlE,QAAQ,IACtE,IAGZ,GACJ,CAzWQwI,GAkCEtH,EAAcd,SAASoB,eAAe,iBACtCL,EAAef,SAASoB,eAAe,kBACvCJ,EAAShB,SAASqI,cAAc,oBAChCpH,EAAWjB,SAASoB,eAAe,YAEnCF,EAAW,CAACJ,EAAaC,GAAcyE,OAAO8C,SAC9CnH,EAAe,SAAC4B,GAClBA,EAAEoD,iBACFnF,SAAAA,EAAQuH,UAAUzD,OAAO,UACzB7D,SAAAA,EAAUsH,UAAUzD,OAAO,SAC/B,EACA7D,SAAAA,EAAUJ,iBAAiB,QAASM,GACpCD,EAASoF,SAAQ,SAACkC,GAAG,OAAKA,EAAI3H,iBAAiB,QAASM,EAAa,IArCrEwG,EADgB3H,SAASqD,iBAAiB,oBAC7BiD,SAAQ,SAACmC,GAAS,IAAAC,EACrBC,EAAU3I,SAASoB,eAAeqH,EAAKG,QAAQC,SACrD,GAAKF,EAAL,CAEA,IAAMG,EAAKnB,EAAOc,EAAKM,UACjBC,EAAQrB,EAAOgB,EAAQI,UACxBC,GAAaF,IAElBA,EAAMxC,SAAQ,SAAC2C,EAAMC,GACjBD,EAAKpI,iBAAiB,SAAS,SAACkC,GAC5BA,EAAEoD,iBACF2C,EAAMxC,SAAQ,SAAC3E,EAAIwH,GACfxH,EAAG4G,UAAUa,OAAO,UACpBJ,EAASG,GAAGZ,UAAUa,OAAO,SACjC,IACAH,EAAKV,UAAUc,IAAI,UACnBL,EAASE,GAAOX,UAAUc,IAAI,SAClC,GACJ,IAEQ,QAARX,EAAAI,EAAM,UAAE,IAAAJ,GAARA,EAAUvE,QAlBU,CAmBxB,GA3BA","sources":["webpack://nineonelabs/./src/admin/js/index.js"],"sourcesContent":["function App() {\r\n    console.log(\"Admin - App()\");\r\n    document.addEventListener(\"DOMContentLoaded\", () => {\r\n        initSummerNote();\r\n        initMobile();\r\n        initTabMenu();\r\n    });\r\n}\r\nApp();\r\n\r\nfunction initTabMenu() {\r\n    const tabMenu = document.querySelectorAll(\"[data-tab-menu]\");\r\n    [...tabMenu].forEach((menu) => {\r\n        const content = document.getElementById(menu.dataset.tabMenu);\r\n        if (!content) return;\r\n\r\n        const items = [...menu.children];\r\n        const sections = [...content.children];\r\n        if (!sections || !items) return;\r\n\r\n        items.forEach((item, index) => {\r\n            item.addEventListener(\"click\", (e) => {\r\n                e.preventDefault();\r\n                items.forEach((el, i) => {\r\n                    el.classList.remove(\"active\");\r\n                    sections[i].classList.remove(\"active\");\r\n                });\r\n                item.classList.add(\"active\");\r\n                sections[index].classList.add(\"active\");\r\n            });\r\n        });\r\n\r\n        items[0]?.click();\r\n    });\r\n}\r\n\r\nfunction initMobile() {\r\n    const menuOpenBtn = document.getElementById(\"menu-open-btn\");\r\n    const menuCloseBtn = document.getElementById(\"menu-close-btn\");\r\n    const drawer = document.querySelector(\".no-admin-drawer\");\r\n    const backdrop = document.getElementById(\"backdrop\");\r\n\r\n    const triggers = [menuOpenBtn, menuCloseBtn].filter(Boolean);\r\n    const clickHandler = (e) => {\r\n        e.preventDefault();\r\n        drawer?.classList.toggle(\"active\");\r\n        backdrop?.classList.toggle(\"active\");\r\n    };\r\n    backdrop?.addEventListener(\"click\", clickHandler);\r\n    triggers.forEach((btn) => btn.addEventListener(\"click\", clickHandler));\r\n}\r\n\r\nfunction uploadVideoFile(file, noteEl) {\r\n  const formData = new FormData();\r\n  formData.append(\"file\", file);\r\n\r\n  return fetch(\"/admin/uploads/summernote?type=video\", {\r\n    method: \"POST\",\r\n    body: formData,\r\n  })\r\n  .then((res) => res.json())\r\n  .then((data) => {\r\n    if (!data.success) throw new Error(data.message || \"비디오 업로드 실패\");\r\n\r\n    $(noteEl).summernote('focus');\r\n    $(noteEl).summernote('restoreRange');\r\n\r\n    const video = document.createElement(\"video\");\r\n    video.src = data.path;\r\n    video.controls = true;\r\n    video.preload = \"metadata\";\r\n    video.playsInline = true;\r\n    video.style.maxWidth = \"100%\";\r\n\r\n    // (선택) 블록 정렬/줄바꿈 안정화를 위해 p로 감싸 삽입\r\n    const wrapper = document.createElement('p');\r\n    wrapper.appendChild(video);\r\n\r\n    $(noteEl).summernote(\"insertNode\", wrapper);\r\n  });\r\n}\r\n\r\n\r\n\r\n\r\nfunction initSummerNote() {\r\n    // ===== Insert custom CSS once (dropdown + active-state) =====\r\n    if (!document.getElementById(\"sn-letterspacing-style\")) {\r\n        const style = document.createElement(\"style\");\r\n        style.id = \"sn-letterspacing-style\";\r\n        style.textContent = `\r\n        /* Letter-spacing dropdown UI */\r\n        .note-editor .dropdown-menu.note-letterspacing-menu { \r\n            padding: 8px; min-width: 240px; max-height: 260px; overflow:auto; \r\n        }\r\n        .note-editor .note-letterspacing-menu .ls-item {\r\n            position: relative;\r\n            display:flex; align-items:center; justify-content:space-between;\r\n            gap:12px; padding:8px 10px; border-radius:8px; text-decoration:none; color:inherit;\r\n        }\r\n        .note-editor .note-letterspacing-menu .ls-item:hover { \r\n            background: rgba(0,0,0,0.06);\r\n        }\r\n        .note-editor .note-letterspacing-menu .ls-item.active { \r\n            background: rgba(0,0,0,0.09);\r\n        }\r\n        .note-editor .note-letterspacing-menu .ls-item.active::before {\r\n            content: \"✓\";\r\n            position:absolute; left:8px; font-size:12px; opacity:0.8;\r\n        }\r\n        .note-editor .note-letterspacing-menu .ls-preview {\r\n            flex:1; font-size:14px; line-height:1; white-space:nowrap;\r\n            padding:4px 8px; border-radius:6px; background: rgba(0,0,0,0.04);\r\n            margin-left:12px; /* room for checkmark */\r\n        }\r\n        .note-editor .note-letterspacing-menu .ls-value {\r\n            font-variant-numeric: tabular-nums; min-width:48px; text-align:right;\r\n            font-size:12px; opacity:0.85;\r\n        }\r\n        .note-editor .note-btn-letters .note-icon { margin-right:6px; }\r\n        `;\r\n        document.head.appendChild(style);\r\n    }\r\n\r\n    const summernotes = document.querySelectorAll(\".summernote\");\r\n\r\n    // Helper: escape HTML\r\n    const escapeHtml = (s) =>\r\n        s.replace(/[&<>\"']/g, ch =>\r\n            ({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;',\"'\":'&#39;'}[ch])\r\n        );\r\n\r\n    // Helper: find current letter-spacing at caret/selection start (returns '0px' if normal)\r\n    function getCurrentLetterSpacingPx(node, editableRoot) {\r\n        let el = node && (node.nodeType === 1 ? node : node.parentElement);\r\n        while (el && el !== editableRoot && el.nodeType === 1) {\r\n            const ls = window.getComputedStyle(el).letterSpacing;\r\n            if (ls && ls !== \"normal\") return ls; // computed in px\r\n            el = el.parentElement;\r\n        }\r\n        const rootLS = editableRoot ? window.getComputedStyle(editableRoot).letterSpacing : \"normal\";\r\n        return (rootLS && rootLS !== \"normal\") ? rootLS : \"0px\";\r\n    }\r\n\r\n    // ===== Apply letter-spacing preserving existing inline styles (bold/italic/underline etc.) =====\r\n    function applyLetterSpacing(context, pxValue) {\r\n        context.invoke('editor.focus');\r\n        context.invoke('editor.restoreRange');\r\n        const rng = context.invoke('editor.getLastRange');\r\n\r\n        if (!rng || rng.isCollapsed()) {\r\n            alert('자간을 적용할 텍스트를 먼저 선택해주세요.');\r\n            return;\r\n        }\r\n\r\n        // Use Summernote range API to WRAP the selection with <span style=\"letter-spacing:...\">\r\n        // This preserves existing inline tags inside selection (b/i/u/span...)\r\n        const span = document.createElement('span');\r\n        span.style.letterSpacing = pxValue;\r\n\r\n        // Prefer Summernote's safe wrapper\r\n        if (typeof rng.wrapBodyInlineWith === 'function') {\r\n            rng.wrapBodyInlineWith(span);\r\n        } else {\r\n            // Fallback: try native surroundContents (may fail on partial non-text selection)\r\n            try {\r\n                const native = rng.nativeRange ? rng.nativeRange() : window.getSelection().getRangeAt(0);\r\n                native.surroundContents(span);\r\n            } catch (e) {\r\n                // As a last resort (avoid losing styles): insert wrapper & move contents\r\n                const native = rng.nativeRange ? rng.nativeRange() : window.getSelection().getRangeAt(0);\r\n                const frag = native.extractContents();\r\n                span.appendChild(frag);\r\n                native.insertNode(span);\r\n            }\r\n        }\r\n\r\n        // Notify editor for undo stack & UI refresh\r\n        if (typeof context.invoke === 'function') {\r\n            context.invoke('editor.afterCommand'); // add to history\r\n        }\r\n    }\r\n\r\n    const VideoUploadButton = function (context) {\r\n        const ui = $.summernote.ui;\r\n\r\n        // 숨김 파일 입력\r\n        const $file = $('<input type=\"file\" accept=\"video/*\" style=\"display:none\" />');\r\n        $(document.body).append($file);\r\n\r\n        $file.on(\"change\", function () {\r\n            const file = this.files && this.files[0];\r\n            if (!file) return;\r\n            // (선택) 클라 사이즈 제한: 200MB 예시\r\n            // if (file.size > 200 * 1024 * 1024) { alert(\"200MB 이하만 업로드 가능합니다.\"); return; }\r\n\r\n            // 커서 복구 후 업로드\r\n            context.invoke('editor.focus');\r\n            context.invoke('editor.restoreRange');\r\n            uploadVideoFile(file, context.layoutInfo.note[0])\r\n                .catch(err => alert(err.message || \"비디오 업로드 실패\"))\r\n                .finally(() => { $file.val(\"\"); });\r\n        });\r\n\r\n        return ui.button({\r\n            contents: '<i class=\"note-icon-video\"></i> 업로드',\r\n            tooltip: \"비디오 업로드\",\r\n            click: function () {\r\n                context.invoke('editor.saveRange');\r\n                $file.trigger(\"click\");\r\n            }\r\n        }).render();\r\n    };\r\n\r\n    // ===== Letter-spacing dropdown button (pixels only) =====\r\n    const LetterSpacingDropdown = function (context) {\r\n        const ui = $.summernote.ui;\r\n        const values = ['0px', '1px', '2px', '3px', '4px', '6px', '8px', '10px'];\r\n\r\n        const itemsHtml = values.map(v => `\r\n            <a class=\"dropdown-item ls-item\" href=\"#\" data-value=\"${v}\">\r\n                <span class=\"ls-preview\" style=\"letter-spacing:${v}\">가Aa 가Aa</span>\r\n                <span class=\"ls-value\">${v}</span>\r\n            </a>\r\n        `).join('') + `\r\n            <div class=\"dropdown-divider\"></div>\r\n            <a class=\"dropdown-item ls-item\" href=\"#\" data-value=\"0px\">\r\n                <span class=\"ls-preview\" style=\"letter-spacing:0px\">Reset</span>\r\n                <span class=\"ls-value\">0px</span>\r\n            </a>\r\n        `;\r\n\r\n        const $group = ui.buttonGroup([\r\n            ui.button({\r\n                className: 'dropdown-toggle note-btn-letters',\r\n                contents: '<i class=\"note-icon-magic note-icon\"></i>자간<span class=\"caret\"></span>',\r\n                tooltip: 'Letter spacing (px)',\r\n                data: { toggle: 'dropdown' }\r\n            }),\r\n            ui.dropdown({\r\n                className: 'note-letterspacing-menu',\r\n                contents: itemsHtml,\r\n                callback: function ($dropdown) {\r\n                    const $toggle = $dropdown.prev('.dropdown-toggle');\r\n\r\n                    function markActive(currentPx) {\r\n                        const $links = $dropdown.find('a.ls-item');\r\n                        $links.removeClass('active');\r\n                        const $match = $links.filter((_, a) => $(a).data('value') === currentPx);\r\n                        if ($match.length) $match.addClass('active');\r\n                    }\r\n\r\n                    $toggle.on('click', function () {\r\n                        context.invoke('editor.focus');\r\n                        context.invoke('editor.restoreRange');\r\n                        const rng = context.invoke('editor.getLastRange');\r\n                        let anchorNode = (rng && rng.sc) ? rng.sc : (document.getSelection()?.anchorNode || null);\r\n                        const editableRoot = context?.layoutInfo?.editable?.[0] || null;\r\n                        const currentPx = getCurrentLetterSpacingPx(anchorNode, editableRoot);\r\n                        markActive(currentPx);\r\n                    });\r\n\r\n                    $dropdown.find('a.ls-item').on('click', function (e) {\r\n                        e.preventDefault();\r\n                        const value = $(this).data('value');\r\n\r\n                        applyLetterSpacing(context, value);\r\n\r\n                        // update active state\r\n                        $(this).closest('.note-letterspacing-menu').find('.ls-item').removeClass('active');\r\n                        $(this).addClass('active');\r\n                    });\r\n                }\r\n            })\r\n        ]);\r\n\r\n        return $group.render();\r\n    };\r\n\r\n    document.querySelectorAll(\".summernote\").forEach((element) => {\r\n        $(element).summernote({\r\n            lang: \"ko-KR\",\r\n            height: 350,\r\n\r\n            toolbar: [\r\n                [\"style\", [\"style\"]],\r\n                [\"font\", [\"bold\", \"italic\", \"underline\", \"clear\", \"fontsize\"]],\r\n                [\"fontname\", [\"fontname\"]],\r\n                [\"color\", [\"color\"]],\r\n                [\"para\", [\"ul\", \"ol\", \"paragraph\"]],\r\n                [\"table\", [\"table\"]],\r\n                [\"insert\", [\"link\", \"picture\", \"video\", \"videoUpload\"]],\r\n                [\"height\", [\"height\", \"letterSpacing\"]],\r\n                [\"view\", [\"fullscreen\", \"codeview\", \"help\"]],\r\n            ],\r\n\r\n            fontSizes: ['8', '9', '10', '11', '12', '14', '16', '18', '20', '24', '28', '32', '36', '40', '48'],\r\n            lineHeights: ['1', '1.2', '1.3', '1.5', '1.75', '2', '2.5', '3'],\r\n\r\n            buttons: { \r\n                letterSpacing: LetterSpacingDropdown,\r\n                videoUpload: VideoUploadButton,\r\n             },\r\n\r\n            callbacks: {\r\n                onInit: function () {\r\n                    $(element).summernote('focus');\r\n                    $(element).summernote('saveRange');\r\n                },\r\n                onKeyup: function () {\r\n                    $(element).summernote('saveRange');\r\n                },\r\n                onMouseUp: function () {\r\n                    $(element).summernote('saveRange');\r\n                },\r\n                onImageUpload: function (files) {\r\n                    const formData = new FormData();\r\n                    formData.append(\"file\", files[0]);\r\n\r\n                    fetch(\"/admin/uploads/summernote?type=image\", {\r\n                        method: \"POST\",\r\n                        body: formData,\r\n                    })\r\n                        .then((response) => response.json())\r\n                        .then((data) => {\r\n                            if (data.success) {\r\n                                $(element).summernote(\"insertImage\", data.path);\r\n                            } else {\r\n                                alert(data.message || \"이미지 업로드에 실패했습니다.\");\r\n                            }\r\n                        })\r\n                        .catch((error) => console.error(error));\r\n                },\r\n                // (옵션) 드롭/붙여넣기에서 비디오면 업로드\r\n                onDrop: function(e) {\r\n                    const dt = e.originalEvent.dataTransfer;\r\n                    if (!dt || !dt.files || !dt.files.length) return;\r\n                    const videos = [...dt.files].filter(f => f.type.startsWith(\"video/\"));\r\n                    if (videos.length) {\r\n                        e.preventDefault(); e.stopPropagation();\r\n                        $(element).summernote('saveRange');\r\n                        uploadVideoFile(videos[0], element).catch(err => alert(err.message));\r\n                    }\r\n                },\r\n                onPaste: function(e) {\r\n                    const cd = e.originalEvent.clipboardData;\r\n                    if (!cd || !cd.files || !cd.files.length) return;\r\n                    const videos = [...cd.files].filter(f => f.type.startsWith(\"video/\"));\r\n                    if (videos.length) {\r\n                        e.preventDefault(); e.stopPropagation();\r\n                        $(element).summernote('saveRange');\r\n                        uploadVideoFile(videos[0], element).catch(err => alert(err.message));\r\n                    }\r\n                },\r\n\r\n                // (선택) Summernote 일부 버전에서 제공되는 onVideoUpload 훅을 함께 사용하고 싶다면:\r\n                onVideoUpload: function(files) {\r\n                    if (!files || !files.length) return;\r\n                    $(element).summernote('saveRange');\r\n                    uploadVideoFile(files[0], element).catch(err => alert(err.message));\r\n                },\r\n            },\r\n        });\r\n    });\r\n}\r\n"],"names":["uploadVideoFile","file","noteEl","formData","FormData","append","fetch","method","body","then","res","json","data","success","Error","message","$","summernote","video","document","createElement","src","path","controls","preload","playsInline","style","maxWidth","wrapper","appendChild","console","log","addEventListener","menuOpenBtn","menuCloseBtn","drawer","backdrop","triggers","clickHandler","getElementById","id","textContent","head","getCurrentLetterSpacingPx","node","editableRoot","el","nodeType","parentElement","ls","window","getComputedStyle","letterSpacing","rootLS","applyLetterSpacing","context","pxValue","invoke","rng","isCollapsed","span","wrapBodyInlineWith","nativeRange","getSelection","getRangeAt","surroundContents","e","native","frag","extractContents","insertNode","alert","querySelectorAll","VideoUploadButton","ui","$file","on","this","files","layoutInfo","note","err","val","button","contents","tooltip","click","trigger","render","LetterSpacingDropdown","itemsHtml","map","v","concat","join","buttonGroup","className","toggle","dropdown","callback","$dropdown","markActive","currentPx","$links","find","removeClass","$match","filter","_","a","length","addClass","prev","_document$getSelectio","_context$layoutInfo","sc","anchorNode","editable","preventDefault","value","closest","forEach","element","lang","height","toolbar","fontSizes","lineHeights","buttons","videoUpload","callbacks","onInit","onKeyup","onMouseUp","onImageUpload","response","error","onDrop","dt","originalEvent","dataTransfer","videos","_toConsumableArray","f","type","startsWith","stopPropagation","onPaste","cd","clipboardData","onVideoUpload","initSummerNote","querySelector","Boolean","classList","btn","menu","_items$","content","dataset","tabMenu","items","children","sections","item","index","i","remove","add"],"sourceRoot":""}