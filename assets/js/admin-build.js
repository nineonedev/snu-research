/*! For license information please see admin-build.js.LICENSE.txt */
(()=>{function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=Array(n);t<n;t++)o[t]=e[t];return o}function t(e,n){var t=new FormData;return t.append("file",e),fetch("/admin/uploads/summernote?type=video",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){if(!e.success)throw new Error(e.message||"비디오 업로드 실패");$(n).summernote("focus"),$(n).summernote("restoreRange");var t=document.createElement("video");t.src=e.path,t.controls=!0,t.preload="metadata",t.playsInline=!0,t.style.maxWidth="100%";var o=document.createElement("p");o.appendChild(t),$(n).summernote("insertNode",o)}))}console.log("Admin - App()"),document.addEventListener("DOMContentLoaded",(function(){var n,o,a,r,i,l;!function(){if(!document.getElementById("sn-letterspacing-style")){var n=document.createElement("style");n.id="sn-letterspacing-style",n.textContent='\n        /* Letter-spacing dropdown UI */\n        .note-editor .dropdown-menu.note-letterspacing-menu { \n            padding: 8px; min-width: 240px; max-height: 260px; overflow:auto; \n        }\n        .note-editor .note-letterspacing-menu .ls-item {\n            position: relative;\n            display:flex; align-items:center; justify-content:space-between;\n            gap:12px; padding:8px 10px; border-radius:8px; text-decoration:none; color:inherit;\n        }\n        .note-editor .note-letterspacing-menu .ls-item:hover { \n            background: rgba(0,0,0,0.06);\n        }\n        .note-editor .note-letterspacing-menu .ls-item.active { \n            background: rgba(0,0,0,0.09);\n        }\n        .note-editor .note-letterspacing-menu .ls-item.active::before {\n            content: "✓";\n            position:absolute; left:8px; font-size:12px; opacity:0.8;\n        }\n        .note-editor .note-letterspacing-menu .ls-preview {\n            flex:1; font-size:14px; line-height:1; white-space:nowrap;\n            padding:4px 8px; border-radius:6px; background: rgba(0,0,0,0.04);\n            margin-left:12px; /* room for checkmark */\n        }\n        .note-editor .note-letterspacing-menu .ls-value {\n            font-variant-numeric: tabular-nums; min-width:48px; text-align:right;\n            font-size:12px; opacity:0.85;\n        }\n        .note-editor .note-btn-letters .note-icon { margin-right:6px; }\n        ',document.head.appendChild(n)}function o(e,n){for(var t=e&&(1===e.nodeType?e:e.parentElement);t&&t!==n&&1===t.nodeType;){var o=window.getComputedStyle(t).letterSpacing;if(o&&"normal"!==o)return o;t=t.parentElement}var a=n?window.getComputedStyle(n).letterSpacing:"normal";return a&&"normal"!==a?a:"0px"}function a(e,n){e.invoke("editor.focus"),e.invoke("editor.restoreRange");var t=e.invoke("editor.getLastRange");if(t&&!t.isCollapsed()){var o=document.createElement("span");if(o.style.letterSpacing=n,"function"==typeof t.wrapBodyInlineWith)t.wrapBodyInlineWith(o);else try{(t.nativeRange?t.nativeRange():window.getSelection().getRangeAt(0)).surroundContents(o)}catch(e){var a=t.nativeRange?t.nativeRange():window.getSelection().getRangeAt(0),r=a.extractContents();o.appendChild(r),a.insertNode(o)}"function"==typeof e.invoke&&e.invoke("editor.afterCommand")}else alert("자간을 적용할 텍스트를 먼저 선택해주세요.")}document.querySelectorAll(".summernote");var r=function(e){var n=$.summernote.ui,o=$('<input type="file" accept="video/*" style="display:none" />');return $(document.body).append(o),o.on("change",(function(){var n=this.files&&this.files[0];n&&(e.invoke("editor.focus"),e.invoke("editor.restoreRange"),t(n,e.layoutInfo.note[0]).catch((function(e){return alert(e.message||"비디오 업로드 실패")})).finally((function(){o.val("")})))})),n.button({contents:'<i class="note-icon-video"></i> 업로드',tooltip:"비디오 업로드",click:function(){e.invoke("editor.saveRange"),o.trigger("click")}}).render()},i=function(e){var n=$.summernote.ui,t=["0px","1px","2px","3px","4px","6px","8px","10px"].map((function(e){return'\n            <a class="dropdown-item ls-item" href="#" data-value="'.concat(e,'">\n                <span class="ls-preview" style="letter-spacing:').concat(e,'">가Aa 가Aa</span>\n                <span class="ls-value">').concat(e,"</span>\n            </a>\n        ")})).join("")+'\n            <div class="dropdown-divider"></div>\n            <a class="dropdown-item ls-item" href="#" data-value="0px">\n                <span class="ls-preview" style="letter-spacing:0px">Reset</span>\n                <span class="ls-value">0px</span>\n            </a>\n        ';return n.buttonGroup([n.button({className:"dropdown-toggle note-btn-letters",contents:'<i class="note-icon-magic note-icon"></i>자간<span class="caret"></span>',tooltip:"Letter spacing (px)",data:{toggle:"dropdown"}}),n.dropdown({className:"note-letterspacing-menu",contents:t,callback:function(n){function t(e){var t=n.find("a.ls-item");t.removeClass("active");var o=t.filter((function(n,t){return $(t).data("value")===e}));o.length&&o.addClass("active")}n.prev(".dropdown-toggle").on("click",(function(){var n,a;e.invoke("editor.focus"),e.invoke("editor.restoreRange");var r=e.invoke("editor.getLastRange");t(o(r&&r.sc?r.sc:(null===(n=document.getSelection())||void 0===n?void 0:n.anchorNode)||null,(null==e||null===(a=e.layoutInfo)||void 0===a||null===(a=a.editable)||void 0===a?void 0:a[0])||null))})),n.find("a.ls-item").on("click",(function(n){n.preventDefault();var t=$(this).data("value");a(e,t),$(this).closest(".note-letterspacing-menu").find(".ls-item").removeClass("active"),$(this).addClass("active")}))}})]).render()};document.querySelectorAll(".summernote").forEach((function(n){$(n).summernote({lang:"ko-KR",height:350,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear","fontsize"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video","videoUpload"]],["height",["height","letterSpacing"]],["view",["fullscreen","codeview","help"]]],fontSizes:["8","9","10","11","12","14","16","18","20","24","28","32","36","40","48"],lineHeights:["1","1.2","1.3","1.5","1.75","2","2.5","3"],buttons:{letterSpacing:i,videoUpload:r},callbacks:{onInit:function(){$(n).summernote("focus"),$(n).summernote("saveRange")},onKeyup:function(){$(n).summernote("saveRange")},onMouseUp:function(){$(n).summernote("saveRange")},onImageUpload:function(e){var t=new FormData;t.append("file",e[0]),fetch("/admin/uploads/summernote?type=image",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){e.success?$(n).summernote("insertImage",e.path):alert(e.message||"이미지 업로드에 실패했습니다.")})).catch((function(e){return console.error(e)}))},onDrop:function(o){var a=o.originalEvent.dataTransfer;if(a&&a.files&&a.files.length){var r=e(a.files).filter((function(e){return e.type.startsWith("video/")}));r.length&&(o.preventDefault(),o.stopPropagation(),$(n).summernote("saveRange"),t(r[0],n).catch((function(e){return alert(e.message)})))}},onPaste:function(o){var a=o.originalEvent.clipboardData;if(a&&a.files&&a.files.length){var r=e(a.files).filter((function(e){return e.type.startsWith("video/")}));r.length&&(o.preventDefault(),o.stopPropagation(),$(n).summernote("saveRange"),t(r[0],n).catch((function(e){return alert(e.message)})))}},onVideoUpload:function(e){e&&e.length&&($(n).summernote("saveRange"),t(e[0],n).catch((function(e){return alert(e.message)})))}}})}))}(),n=document.getElementById("menu-open-btn"),o=document.getElementById("menu-close-btn"),a=document.querySelector(".no-admin-drawer"),r=document.getElementById("backdrop"),i=[n,o].filter(Boolean),l=function(e){e.preventDefault(),null==a||a.classList.toggle("active"),null==r||r.classList.toggle("active")},null==r||r.addEventListener("click",l),i.forEach((function(e){return e.addEventListener("click",l)})),e(document.querySelectorAll("[data-tab-menu]")).forEach((function(n){var t,o=document.getElementById(n.dataset.tabMenu);if(o){var a=e(n.children),r=e(o.children);r&&a&&(a.forEach((function(e,n){e.addEventListener("click",(function(t){t.preventDefault(),a.forEach((function(e,n){e.classList.remove("active"),r[n].classList.remove("active")})),e.classList.add("active"),r[n].classList.add("active")}))})),null===(t=a[0])||void 0===t||t.click())}}))}))})();
//# sourceMappingURL=admin-build.js.map